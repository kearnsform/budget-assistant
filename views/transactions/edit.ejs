<% layout('layouts/boilerplate')%>

    <h1 class="display-4">Edit Transaction</h1>
    <form class="form-border validated-form" method="POST" action="/transactions/<%=transaction.id%>?_method=PATCH" novalidate>
        <div class="form-group row">
            <label for="accountId" class="col-sm-3 col-form-label">AccountId:</label>
            <div class="col-sm-5">
                <input type="number" class="form-control" id="accountId" name="transaction[accountId]" value="<%= transaction.accountId %>" required>
            </div>
        </div>
        <div class="form-group row">
            <label for="date" class="col-sm-3 col-form-label">Date:</label>
            <div class="col-sm-5">
                <input type="date" class="form-control" id="date" name="transaction[date]" value="<%=helpers.parseDate(transaction.date) %>" required>
            </div>
        </div>
        <div class="form-group row">
            <label for="category" class="col-sm-3 col-form-label">Category:</label>
            <div class="col-sm-5">
                <select name="transaction[category]" id="category">
                <% for(let category of categories){ %>
                <option  class="form-control" value="<%=category%>" <%= transaction.category === category ? 'selected': '' %>><%=category%></option>
                <% } %>
            </select>
            </div>
        </div>
        <div class="form-group row">
            <label for="company" class="col-sm-3 col-form-label">Company:</label>
            <div class="col-sm-5">
                <input type="text" class="form-control" id="company" name="transaction[company]" value="<%= transaction.company %>">
            </div>
        </div>
        <div class="form-group row">
            <label for="description" class="col-sm-3 col-form-label">Description:</label>
            <div class="col-sm-5">
                <input type="text" class="form-control" id="description" name="transaction[description]" value="<%= transaction.description %>">
            </div>
        </div>
        <div class="form-group row">
            <label for="amount" class="col-sm-3 col-form-label">Amount:</label>
            <div class="col-sm-5">
                <input type="number" class="form-control" step="0.01" id="amount" name="transaction[amount]" value="<%= transaction.amount %>" required>
            </div>
        </div>
        <div class="form-group row">
            <label for="clearingDate" class="col-sm-3 col-form-label">Clearing Date:</label>
            <div class="col-sm-5">
                <input type="date" class="form-control" id="clearingDate" name="transaction[clearingDate]" value="<%= helpers.parseDate(transaction.clearingDate) %>">
            </div>
        </div>
        <br>
        <button class="btn btn-success">Save</button>
    </form>
    <br>
    <form method="POST" action="/transactions/<%= transaction.id %>?_method=DELETE">
        <button class="btn btn-danger">Delete</button>
    </form>
    <br>
    <a href="/transactions">Go Back</a>